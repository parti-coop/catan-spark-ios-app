![Natrium](Assets/logo.png)

A pre-build swift script to alter your Xcode project at build time per environment and build configuration in combination with CocoaPods. (Swift only)

[![forthebadge](http://forthebadge.com/images/badges/made-with-swift.svg)](http://forthebadge.com) [![forthebadge](http://forthebadge.com/images/badges/built-with-swag.svg)](http://forthebadge.com)

[![Platform](https://img.shields.io/cocoapods/p/Natrium.svg?style=flat)](http://cocoadocs.org/docsets/Natrium)
[![CocoaPods Compatible](https://img.shields.io/cocoapods/v/Natrium.svg)](http://cocoadocs.org/docsets/Natrium)
[![Quality](https://apps.e-sites.nl/cocoapodsquality/Natrium/badge.svg?004)](https://cocoapods.org/pods/Natrium/quality)
[![Carthage compatible](https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat)](https://github.com/Carthage/Carthage)
[![Travis-ci](https://travis-ci.org/e-sites/Natrium.svg?branch=master&001)](https://travis-ci.org/e-sites/Natrium)

> ⚠️ **IMPORTANT**  
> Natrium v5.x doesn't need a build phase script anymore.    
> Open your `Build Phases` from your target settings and remove the `[Natrium] check` step.    
>     
> Else your build will fail during the script steps

# Roadmap
- [x] Swift 4.0 compatible
- [x] Use swift instead of ruby
- [x] Remove ImageMagick dependency
- [x] Unit tests
- [x] Different installation options (apart from CocoaPods)
- [ ] Better error handling / reporting

# Installation

- CocoaPods → [Read the instructions here](docs/INSTALL_COCOAPODS.md).
- Carthage → [Read the instructions here](docs/INSTALL_CARTHAGE.md).
- Manually → [Read the instructions here](docs/INSTALL_MANUALLY.md).

# Implementation

If you installed it from cocoapods:

```swift
// AppDelegate.swift

import Natrium
typealias Config = Natrium.Config
```

_This step is optional, but this way you can use the `Config` class through your entire project without having to use the `import Natrium` statement in every seperate class._

You can now use the `Config.swift` file and its underlying class.

# Configuration

Configuration documentation can be found [here](docs/CONFIGURATION.md).

# Usage

The example `.natrium.yml` as shown above, will result in the following Config.swift file:

```swift
import Foundation

/// Natrium.Config
/// Autogenerated by natrium
///
/// - see: https://github.com/e-sites/Natrium

public class Config {
    public enum EnvironmentType: String {
        case staging = "Staging"
        case production = "Production"
    }

    public enum ConfigurationType: String {
        case debug = "Debug"
        case release = "Release"
    }

    public static let environment: EnvironmentType = .staging
    public static let configuration: ConfigurationType = .debug

    // swiftlint:disable line_length
    public static let testVariableDouble: Double = 1.0
    public static let testVariableString: String = "debugString"
    public static let testVariableBoolean: Bool = false
    public static let testVariableInteger: Int = 125
    // swiftlint:enable line_length
}
```

It can be used like so:

```swift
class MainViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()

        print("bundle identifier: \(Bundle.main.bundleIdentifier!)")
        print("environment: \(Config.environment)")
    }
}
```

**Result:**

```
bundle identifier: com.esites.app.staging
environment: staging
```


# Advanced

## Re-install

To re-run the previous natrium command with the stored arguments from the Natrium.lock file:

```
./natrium install
```
![Termin](Assets/running.gif?001)


## Logging

In the `Pods/Natrium/bin/` folder you can find `natrium.log` with the logs of the previous build. It might help you with debugging.